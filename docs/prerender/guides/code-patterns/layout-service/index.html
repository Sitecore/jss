<!DOCTYPE html>
<html lang="en" data-reactroot=""><head><link rel="stylesheet" href="/dist/server.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/><link rel="stylesheet" href="/dist/client.css"/><link rel="icon" type="image/png" href="/assets/img/favicon-32x32.png"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Sitecore JavaScript Services Documentation"/><title data-react-helmet="true">Layout Service Customization Guide | Sitecore JSS Documentation</title></head><body><div id="app"><section class="ant-layout" id="app-wrap"><header class="ant-layout-header"><div class="ant-row ant-row-start" style="padding:30px"><a style="flex:300px" href="/"><img src="/assets/img/sitecore-logo.svg" height="53px" alt="Sitecore JSS" class="logo"/></a><ul flex="auto" style="border-bottom:none" class="ant-menu ant-menu-light ant-menu-root ant-menu-horizontal" role="menu"><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>路路路</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" href="/features">Features</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>路路路</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" href="/docs">Documentation</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>路路路</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child ant-menu-item-selected" role="menuitem"><a class="nav-link" href="/guides">Guides</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>路路路</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" target="_blank" rel="noopener noreferrer" href="https://www.sitecore.com/getting-started/developer-trial">Trial</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>路路路</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" href="/community">Community</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>路路路</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item get-started-button ant-menu-item-only-child" role="menuitem"><a class="btn btn-secondary btn-sm float-left text-white" href="/docs/getting-started/quick-start">Get Started</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>路路路</span><i class="ant-menu-submenu-arrow"></i></div></li></ul></div></header><div class="main-wrapper"><section class="ant-layout border-bottom"><section class="jumbo-container jumbo-container-short bg-light"><div class="default"><div class="circleContainer"><div class="circleContainer-outer-top"><div class="circleContainer-inner"><div class="circleContainer-inner-primary"><div class="circ circ_right circle-fg-right-lg bg-success" id="defaultimage"><img src="/assets/img/transparent-1x1.png"/></div></div><div class="circleContainer-inner-secondary"><div class="circ circ_right circle-fg-right-lg-sub bg-primary"></div></div></div></div><div class="circleContainer-outer-bottom"><div class="circleContainer-inner"><div class="circleContainer-inner-primary"><div class="circle circle-fg-left-md bg-success"></div></div></div></div></div><div class="shapes-wrapper"><div class="outer-shape container"><div class="inner-shape row"><div class="content-wrapper col-12 col-md-9 min-height"><div class="content-wrapper-inner"><h1 class="title mb-3">Guides, Patterns, &amp; Recommended Practices</h1><p class="copy mb-0 p-0">A collection of learnings and recommendations from our developers and community, based on learnings from real-world projects.</p></div></div></div></div></div></div></section></section><div class="ant-row ant-row-space-between" style="margin-left:-20px;margin-right:-20px;flex-wrap:nowrap;margin:30px"><div style="padding-left:20px;padding-right:20px;flex:0 0 300px" class="ant-col"><aside><div class="side-nav"><ul class="ant-menu ant-menu-light ant-menu-root ant-menu-inline" role="menu"><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="true" aria-owns="0$Menu" aria-haspopup="true" title="Thinking in JSS">Thinking in JSS<i class="ant-menu-submenu-arrow"></i></div><ul id="0$Menu" class="ant-menu ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/thinking-in-jss/js-vs-jss">JS Apps vs JSS Apps</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/thinking-in-jss/terminology">Sitecore Terminology &amp; Concepts</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/thinking-in-jss/project-structure">Project Structure</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/thinking-in-jss/developer-workflows">Developer Workflows</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="true" aria-owns="1$Menu" aria-haspopup="true" title="Code Patterns">Code Patterns<i class="ant-menu-submenu-arrow"></i></div><ul id="1$Menu" class="ant-menu ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a class="active" aria-current="page" href="/guides/code-patterns/layout-service">Layout Service Customization</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/code-patterns/media-handling">Media Handling</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/code-patterns/routing">Routing</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/code-patterns/ssr">SSR Recommendations</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="true" aria-owns="2$Menu" aria-haspopup="true" title="Multisite Scenarios">Multisite Scenarios<i class="ant-menu-submenu-arrow"></i></div><ul id="2$Menu" class="ant-menu ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/multisite/content-patterns">Content Patterns</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/multisite/implementation-patterns">Implementation Patterns</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/multisite/multi-language-support">Multi-Lingual Support</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/multisite/sxa-integration">SXA Integration</a></li></ul></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:24px"><a href="/guides/performance">Performance</a></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="true" aria-owns="4$Menu" aria-haspopup="true" title="Debugging">Debugging<i class="ant-menu-submenu-arrow"></i></div><ul id="4$Menu" class="ant-menu ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/error-handling-debugging/setup-checklist">Setup Checklist</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/error-handling-debugging/common-pitfalls">Common Pitfalls</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/error-handling-debugging/js-validation">Validation in JS</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/error-handling-debugging/http-status-codes">HTTP Status Codes</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/error-handling-debugging/debugging-help">Debugging Help</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="true" aria-owns="5$Menu" aria-haspopup="true" title="GraphQL">GraphQL<i class="ant-menu-submenu-arrow"></i></div><ul id="5$Menu" class="ant-menu ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/graphql/extending-graphql">Extending GraphQL</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/graphql/graphql-security">Security</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/graphql/query-recipes">Query Recipes</a></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="true" aria-owns="6$Menu" aria-haspopup="true" title=" Work in Progress"> Work in Progress<i class="ant-menu-submenu-arrow"></i></div><ul id="6$Menu" class="ant-menu ant-menu-sub ant-menu-inline" role="menu"><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/wip/deployment-topologies">Deployment Topologies</a></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:48px"><a href="/guides/wip/migration-guide">Migration Guide</a></li></ul></li></ul><div class="navbar-nav bd-navbar-nav flex-column"></div></div></aside></div><div style="padding-left:20px;padding-right:20px;flex:auto" class="ant-col"><main><h1>Layout Service Customization Guide</h1><section class="toc-container"><div class="title">In this guide</div><div match="[object Object]" location="[object Object]" history="[object Object]"><div class="toc">
<ul>
<li><a href="#when-to-customize-layout-service-output">When to customize Layout Service output</a><ul>
<li><a href="#security-considerations">Security considerations</a></li>
</ul>
</li>
<li><a href="#extending-sitecore-context">Extending Sitecore Context</a><ul>
<li><a href="#extending-sitecore-context-in-disconnected-mode">Extending Sitecore Context in Disconnected Mode</a></li>
</ul>
</li>
<li><a href="#rendering-contents-resolvers">Rendering Contents Resolvers</a><ul>
<li><a href="#ootb-resolvers">OOTB Resolvers</a></li>
<li><a href="#building-custom-resolvers">Building Custom Resolvers</a></li>
<li><a href="#community-guides">Community Guides</a></li>
<li><a href="#sample-implementations">Sample implementations</a></li>
</ul>
</li>
<li><a href="#other-customization-methods">Other Customization Methods</a><ul>
<li><a href="#alternative-method-to-extend-layout-service-data">Alternative method to extend Layout Service data</a></li>
<li><a href="#extend-sitecore-context-from-the-jss-app">Extend Sitecore Context from the JSS app</a></li>
</ul>
</li>
<li><a href="#customize-layout-service-response-via-dataapi-options">Customize Layout Service response via dataApi options</a></li>
</ul>
</div>

</div></section><div class="article markdown-section" match="[object Object]" location="[object Object]" history="[object Object]"><blockquote>
  <p>Tip: A reference of the Layout Service request model properties is documented in Sitecore Headless Development documentation - <a href="https://doc.sitecore.com/developers/100/developer-tools/en/sitecore-layout-service.html">"Sitecore Layout Service"</a></p>
</blockquote>
<hr />
<h2 id="when-to-customize-layout-service-output">When to customize Layout Service output</h2>
<p>JSS components are hydrated with dynamic data from the Layout Service output, which can be customized by developers to fulfill various business requirements. The OOTB techniques for augmenting Layout Service output are</p>
<ol>
<li><a href="/docs/techniques/extending-layout-service/layoutservice-extending-context">Extending Sitecore Context</a></li>
<li><a href="/docs/techniques/extending-layout-service/layoutservice-rendering-contents#choose-or-configure-a-builtin-rendering-contents-resolver">Using Rendering Contents Resolvers</a></li>
<li><a href="/docs/techniques/graphql/integrated-graphql">Using Integrated GraphQL</a></li>
<li><a href="/docs/techniques/graphql/connected-graphql">Using Connected GraphQL</a></li>
</ol>
<h3 id="security-considerations">Security considerations</h3>
<p>Layout Service output is not secure, and can be inspected client-side. Treat it like an open API, ensuring you are not exposing sensitive or excess data.</p>
<p>When extending <code>Sitecore Context</code> or building custom <code>Rendering Content Resolvers</code>:</p>
<ul>
<li>Only add specific fields that are needed for front-end components. (Ex. Do not inject the entire Sitecore Context object from backend Sitecore pipelines into the Layout Service response)</li>
<li>Add data that represent global app state and needs to be accessed by multiple components</li>
<li>Avoid exposing sensitive information (Ex. Be aware of serialization depth to avoid accidentally exposing extra data via complex objects)</li>
</ul>
<hr />
<h2 id="extending-sitecore-context">Extending Sitecore Context</h2>
<p>Layout Service provides data about the <code>Sitecore Context</code> that a component is rendering in. On the front-end, <code>Sitecore Context</code> is available to all components. Extending <code>Sitecore Context</code> is great for data that represents global application state like <code>isUserLoggedIn</code> or <code>currentLanguage</code>.</p>
<h3 id="extending-sitecore-context-in-disconnected-mode">Extending Sitecore Context in Disconnected Mode</h3>
<p>Community Guide</p>
<ul>
<li><a href="https://www.adamlamarre.com/adding-content-items-to-sitecore-jss-disconnected-layout-service-context-with-customizecontext/">"Adding Content Items to Sitecore JSS Disconnected Layout Service Context With customizeContext"</a> by <a href="https://twitter.com/erzr">Adam Lamarre</a></li>
</ul>
<hr />
<h2 id="rendering-contents-resolvers">Rendering Contents Resolvers</h2>
<p>Layout Service provides data to components that's necessary for their rendering. By default, Layout Service provides values defined by Content Authors for the component's fields (i.e. fields on its data source). Sometimes, components need dynamic data to render. For example, a "Navigation" component may generate its markup based on child pages created by Content Authors. <code>Rendering Content Resolvers</code> are used to customize the data for individual components. This option is best for encapsulating data that is specific to one or a small set of components.</p>
<h3 id="ootb-resolvers">OOTB Resolvers</h3>
<p>JSS provides 5 resolvers out of the box</p>
<ul>
<li><code>Datasource Resolver</code> - This is the default and serializes your data source.</li>
<li><code>Datasource Item Children Resolver</code> - Serializes the children of the data source, excluding itself.</li>
<li><code>Context Item Resolver</code> - Serializes the context item.</li>
<li><code>Context Item Children Resolver</code> - Serializes the children of the context item.</li>
<li><code>Folder Filter Resolver</code> - Serializes the descendants of a datasource, excluding folders (because of the Item Selector Query: .*[@@templateid!={A87A00B1-E6DB-45AB-8B54-636FEC3B5523}])</li>
</ul>
<blockquote>
  <p>Definitions:</p>
  <ul>
  <li>The <code>context item</code> is (usually) the current page</li>
  <li>The <code>datasource</code> is the item populating data for the current component.</li>
  </ul>
</blockquote>
<h3 id="building-custom-resolvers">Building Custom Resolvers</h3>
<p>The use case for creating a custom Content Resolver would be when the default 5 resolvers are not suitable for your needs and there is a need to change the way data is serialized and returned from the Layout Service for a few components. <br />
&nbsp;</p>
<h3 id="community-guides">Community Guides</h3>
<ul>
<li><p><a href="http://gary.wenneker.org/sitecore-jss-extending-the-layout-service/">Extending the Layout Service</a> by <a href="https://twitter.com/GaryWenneker">Gary Wenneker</a>.</p></li>
<li><p>In case you need to change many renderings and add more complicated customizations of the Layout Service, a better approach is to apply a global Layout Service Configuration. <a href="http://gary.wenneker.org/sitecore-jss-using-a-custom-layout-service-configuration/">Sitecore JSS: Using a custom Layout Service configuration</a> by <a href="https://twitter.com/GaryWenneker">Gary Wenneker</a>.<br />
&nbsp;</p></li>
</ul>
<h3 id="sample-implementations">Sample implementations</h3>
<p>Combining integrated GraphQL and Rendering Contents Resolver output</p>
<ul>
<li>Custom Descendants resolver: gets descendant items of the context item's data source. <a href="https://joost-sitecore.blogspot.com/2020/01/sitecore-jss-layout-service-extensions.html">JSS and arbitrary item hierarchies</a> by <a href="https://twitter.com/vitalii_tylyk">Vitalii Tylyk</a>. (This post also shows a sample of solving this scenario with Integrated GraphQL).</li>
</ul>
<p>&nbsp;</p>
<ul>
<li>Custom resolver that enables using both, an <code>Integrated GraphQL</code> query and a <code>Rendering Content Resolver</code> in the same component (by default you can only use one or the other). <a href="https://blog.vitaliitylyk.com/combining-integrated-graphql-and-rendering-contents-resolver-output/">Combining integrated GraphQL and Rendering Contents Resolver output</a> by <a href="https://twitter.com/vitalii_tylyk">Vitalii Tylyk</a>.</li>
</ul>
<hr />
<h2 id="other-customization-methods">Other Customization Methods</h2>
<h3 id="alternative-method-to-extend-layout-service-data">Alternative method to extend Layout Service data</h3>
<p><a href="https://www.coreysmith.co/jss-extend-layout-service-rendering-data">"Sitecore JSS - Extend Layout Service Rendering Data"</a> by <a href="https://twitter.com/sitecorey">Corey Smith</a></p>
<h3 id="extend-sitecore-context-from-the-jss-app">Extend Sitecore Context from the JSS app</h3>
<p>The <code>SitecoreContextFactory</code> stores the Sitecore context for the app. The script that initializes the <code>SitecoreContextFactory</code> singleton lives in your JSS app, not in the base JSS modules (See <a href="https://github.com/Sitecore/jss/blob/dev/samples/react/src/lib/SitecoreContextFactory.js"><code>/src/lib/SitecoreContextFactory.js</code></a> . So a custom version of <code>SitecoreContextFactory</code> that extends the base class can be plugged in here.</p>
<hr />
<h2 id="customize-layout-service-response-via-dataapi-options">Customize Layout Service response via dataApi options</h2>
<p>Refer to <a href="/guides/code-patterns/routing#customizing-route-handling">Customizing route handling: Using the <code>querystringParams</code> option</a></p>
</div><hr/><div>Found a problem? Have something to add?<a href="https://github.com/Sitecore/jss/edit/guides/docs/data/routes/guides/code-patterns/ssr/en.md">Edit this on GitHub</a></div></main></div></div></div><footer class="ant-layout-footer"><div class="ant-row ant-row-center" style="margin-left:-16px;margin-right:-16px"><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a class="nav-link text-uppercase small text-white font-weight-bold" href="/features">Features</a><nav class="nav flex-column"><a class="nav-link small text-white" href="/features/why-jss">Why JSS?</a><a class="nav-link small text-white" href="/features/why-sitecore">Why Sitecore?</a></nav></div><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a class="nav-link text-uppercase small text-white font-weight-bold" href="/docs">Documentation</a><nav class="nav flex-column"><a class="nav-link small text-white" href="/docs/getting-started/quick-start">Getting Started</a><a class="nav-link small text-white" href="/docs/fundamentals/architecture">Fundamentals</a><a class="nav-link small text-white" href="/docs/client-frameworks/react/react-overview">Client Frameworks</a><a class="nav-link small text-white" href="/docs/techniques/mvc-integration/javascript-rendering">Techniques</a><a class="nav-link small text-white" href="/release-notes">Release Notes</a><a class="nav-link small text-white" href="/help">FAQs</a></nav></div><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a href="https://www.sitecore.com/getting-started/developer-trial" target="_blank" rel="noopener noreferrer" class="nav-link text-uppercase small text-white font-weight-bold">Start Trial</a></div><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a class="nav-link text-uppercase small text-white font-weight-bold" href="/community">Community</a><nav class="nav flex-column"><a href="#" class="nav-link small text-white">Sitecore Community</a><a href="slack://channel?team=T09SHRBNU&amp;id=C7JT0NRQW" class="nav-link small text-white"><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" focusable="false"><title>Slack</title><path fill="currentColor" d="M210.787 234.832l68.31-22.883 22.1 65.977-68.309 22.882z"></path><path d="M490.54 185.6C437.7 9.59 361.6-31.34 185.6 21.46S-31.3 150.4 21.46 326.4 150.4 543.3 326.4 490.54 543.34 361.6 490.54 185.6zM401.7 299.8l-33.15 11.05 11.46 34.38c4.5 13.92-2.87 29.06-16.78 33.56-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18l-11.46-34.38-68.36 22.92 11.46 34.38c4.5 13.92-2.87 29.06-16.78 33.56-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18l-11.46-34.43-33.15 11.05c-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18c-4.5-13.92 2.87-29.06 16.78-33.56l33.12-11.03-22.1-65.9-33.15 11.05c-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18c-4.48-13.93 2.89-29.07 16.81-33.58l33.15-11.05-11.46-34.38c-4.5-13.92 2.87-29.06 16.78-33.56s29.06 2.87 33.56 16.78l11.46 34.38 68.36-22.92-11.46-34.38c-4.5-13.92 2.87-29.06 16.78-33.56s29.06 2.87 33.56 16.78l11.47 34.42 33.15-11.05c13.92-4.5 29.06 2.87 33.56 16.78s-2.87 29.06-16.78 33.56L329.7 194.6l22.1 65.9 33.15-11.05c13.92-4.5 29.06 2.87 33.56 16.78s-2.88 29.07-16.81 33.57z" fill="currentColor"></path></svg>JSS Slack</a><a href="https://sitecore.stackexchange.com/tags/jss" class="nav-link small text-white"><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 120"><title>Sitecore StackExchange</title><path fill="currentColor" d="M22.4 57.5h74.8v15.4H22.4z"></path><path fill="currentColor" d="M22.4 37.6h74.8V53H22.4z"></path><path fill="currentColor" d="M85.5 17H34.4c-6.6 0-12 5.5-12 12.3v4h74.8v-4C97.2 22.5 92 17 85.5 17z"></path><path fill="currentColor" d="M22.4 77.3v4c0 6.8 5.4 12.3 12 12.3h32v16.3l15.8-16.3h3.5c6.6 0 12-5.5 12-12.3v-4H22.4z"></path></svg>Stack Exchange</a><a href="https://github.com/sitecore/jss" class="nav-link small text-white"><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 499.36" focusable="false"><title>GitHub</title><path d="M256 0C114.64 0 0 114.61 0 256c0 113.09 73.34 209 175.08 242.9 12.8 2.35 17.47-5.56 17.47-12.34 0-6.08-.22-22.18-.35-43.54-71.2 15.49-86.2-34.34-86.2-34.34-11.64-29.57-28.42-37.45-28.42-37.45-23.27-15.84 1.73-15.55 1.73-15.55 25.69 1.81 39.21 26.38 39.21 26.38 22.84 39.12 59.92 27.82 74.5 21.27 2.33-16.54 8.94-27.82 16.25-34.22-56.84-6.43-116.6-28.43-116.6-126.49 0-27.95 10-50.8 26.35-68.69-2.63-6.48-11.42-32.5 2.51-67.75 0 0 21.49-6.88 70.4 26.24a242.65 242.65 0 0 1 128.18 0c48.87-33.13 70.33-26.24 70.33-26.24 14 35.25 5.18 61.27 2.55 67.75 16.41 17.9 26.31 40.75 26.31 68.69 0 98.35-59.85 120-116.88 126.32 9.19 7.9 17.38 23.53 17.38 47.41 0 34.22-.31 61.83-.31 70.23 0 6.85 4.61 14.81 17.6 12.31C438.72 464.97 512 369.08 512 256.02 512 114.62 397.37 0 256 0z" fill="currentColor" fill-rule="evenodd"></path></svg>Github</a></nav></div></div><div class="ant-row ant-row-center" style="margin:30px"><div class="ant-col footer-copyright small">漏 Copyright <!-- -->2020<!-- -->, Sitecore. All Rights Reserved.</div><div class="ant-col footer-copyright small"><a href="https://www.sitecore.com/trust" class="pl-2 pr-2" target="_blank" rel="noopener noreferrer">Legal</a><a href="https://www.sitecore.com/trust/privacy-policy" class="pl-2" target="_blank" rel="noopener noreferrer">Privacy</a></div></div></footer></section></div><script>window.__data={"sitecore":{"context":{"pageEditing":false,"site":{"name":"JssDisconnectedLayoutService"},"pageState":"normal","language":"en"},"route":{"databaseName":"available-in-connected-mode","deviceId":"available-in-connected-mode","itemId":"available-in-connected-mode","itemLanguage":"en","itemVersion":1,"layoutId":"available-in-connected-mode","templateId":"available-in-connected-mode","templateName":"Docs Route","name":"layout-service","fields":{"title":{"value":"Layout Service Customization Guide"},"editLink":{"value":{"text":"Edit this on GitHub","href":"https://github.com/Sitecore/jss/edit/guides/docs/data/routes/guides/code-patterns/layout-service/en.md"}}},"placeholders":{"jssdocs-header":[{"uid":"{B1FACDC6-2464-5870-8D7B-C3CF5D4FBC21}","componentName":"Row","dataSource":"available-in-connected-mode","params":{"justify":"start","padding":"30px"},"fields":{},"placeholders":{"jssdocs-row":[{"uid":"{45395753-015E-51C9-84D1-95E00970509F}","componentName":"Logo","dataSource":"available-in-connected-mode","params":{"flex":"300px"},"fields":{}},{"uid":"{9B1CBD0D-507F-566A-BCEE-7498AA5CF7BE}","componentName":"MainNav","dataSource":"available-in-connected-mode","params":{"flex":"auto"},"fields":{"selectedMenuItem":{"value":"guides"}}}]}}],"jssdocs-main":[{"uid":"{45B8C9B5-5F99-5367-B920-C9BBA72294F1}","componentName":"ArticleContainer","dataSource":"available-in-connected-mode","params":{},"fields":{},"placeholders":{"jssdocs-jumbo":[{"uid":"{5D90D8F6-DB13-56E9-86D3-CA11316CA211}","componentName":"FeatureJumboShort","dataSource":"available-in-connected-mode","params":{},"fields":{"image":{"value":{"src":"/assets/img/transparent-1x1.png"}},"imageclass":{"value":"defaultimage"},"csscolorclass":{"value":"default"},"title":{"value":"Guides, Patterns, & Recommended Practices"},"text":{"value":"A collection of learnings and recommendations from our developers and community, based on learnings from real-world projects."}}}],"jssdocs-aside":[{"uid":"{91BCECEC-7E4C-5175-889E-AE591F917812}","componentName":"SideNav","dataSource":"available-in-connected-mode","params":{},"fields":{"navType":{"value":"guides"},"useSearch":{"value":"false"}}}],"jssdocs-content":[{"uid":"{49B36E36-7E48-5505-973D-846A53B6C2F8}","componentName":"Guide","dataSource":"available-in-connected-mode","params":{},"fields":{"text":{"value":"<blockquote>\n  <p>Tip: A reference of the Layout Service request model properties is documented in Sitecore Headless Development documentation - <a href=\"https://doc.sitecore.com/developers/100/developer-tools/en/sitecore-layout-service.html\">\"Sitecore Layout Service\"</a></p>\n</blockquote>\n<hr />\n<h2 id=\"when-to-customize-layout-service-output\">When to customize Layout Service output</h2>\n<p>JSS components are hydrated with dynamic data from the Layout Service output, which can be customized by developers to fulfill various business requirements. The OOTB techniques for augmenting Layout Service output are</p>\n<ol>\n<li><a href=\"/docs/techniques/extending-layout-service/layoutservice-extending-context\">Extending Sitecore Context</a></li>\n<li><a href=\"/docs/techniques/extending-layout-service/layoutservice-rendering-contents#choose-or-configure-a-builtin-rendering-contents-resolver\">Using Rendering Contents Resolvers</a></li>\n<li><a href=\"/docs/techniques/graphql/integrated-graphql\">Using Integrated GraphQL</a></li>\n<li><a href=\"/docs/techniques/graphql/connected-graphql\">Using Connected GraphQL</a></li>\n</ol>\n<h3 id=\"security-considerations\">Security considerations</h3>\n<p>Layout Service output is not secure, and can be inspected client-side. Treat it like an open API, ensuring you are not exposing sensitive or excess data.</p>\n<p>When extending <code>Sitecore Context</code> or building custom <code>Rendering Content Resolvers</code>:</p>\n<ul>\n<li>Only add specific fields that are needed for front-end components. (Ex. Do not inject the entire Sitecore Context object from backend Sitecore pipelines into the Layout Service response)</li>\n<li>Add data that represent global app state and needs to be accessed by multiple components</li>\n<li>Avoid exposing sensitive information (Ex. Be aware of serialization depth to avoid accidentally exposing extra data via complex objects)</li>\n</ul>\n<hr />\n<h2 id=\"extending-sitecore-context\">Extending Sitecore Context</h2>\n<p>Layout Service provides data about the <code>Sitecore Context</code> that a component is rendering in. On the front-end, <code>Sitecore Context</code> is available to all components. Extending <code>Sitecore Context</code> is great for data that represents global application state like <code>isUserLoggedIn</code> or <code>currentLanguage</code>.</p>\n<h3 id=\"extending-sitecore-context-in-disconnected-mode\">Extending Sitecore Context in Disconnected Mode</h3>\n<p>Community Guide</p>\n<ul>\n<li><a href=\"https://www.adamlamarre.com/adding-content-items-to-sitecore-jss-disconnected-layout-service-context-with-customizecontext/\">\"Adding Content Items to Sitecore JSS Disconnected Layout Service Context With customizeContext\"</a> by <a href=\"https://twitter.com/erzr\">Adam Lamarre</a></li>\n</ul>\n<hr />\n<h2 id=\"rendering-contents-resolvers\">Rendering Contents Resolvers</h2>\n<p>Layout Service provides data to components that's necessary for their rendering. By default, Layout Service provides values defined by Content Authors for the component's fields (i.e. fields on its data source). Sometimes, components need dynamic data to render. For example, a \"Navigation\" component may generate its markup based on child pages created by Content Authors. <code>Rendering Content Resolvers</code> are used to customize the data for individual components. This option is best for encapsulating data that is specific to one or a small set of components.</p>\n<h3 id=\"ootb-resolvers\">OOTB Resolvers</h3>\n<p>JSS provides 5 resolvers out of the box</p>\n<ul>\n<li><code>Datasource Resolver</code> - This is the default and serializes your data source.</li>\n<li><code>Datasource Item Children Resolver</code> - Serializes the children of the data source, excluding itself.</li>\n<li><code>Context Item Resolver</code> - Serializes the context item.</li>\n<li><code>Context Item Children Resolver</code> - Serializes the children of the context item.</li>\n<li><code>Folder Filter Resolver</code> - Serializes the descendants of a datasource, excluding folders (because of the Item Selector Query: .*[@@templateid!={A87A00B1-E6DB-45AB-8B54-636FEC3B5523}])</li>\n</ul>\n<blockquote>\n  <p>Definitions:</p>\n  <ul>\n  <li>The <code>context item</code> is (usually) the current page</li>\n  <li>The <code>datasource</code> is the item populating data for the current component.</li>\n  </ul>\n</blockquote>\n<h3 id=\"building-custom-resolvers\">Building Custom Resolvers</h3>\n<p>The use case for creating a custom Content Resolver would be when the default 5 resolvers are not suitable for your needs and there is a need to change the way data is serialized and returned from the Layout Service for a few components. <br />\n&nbsp;</p>\n<h3 id=\"community-guides\">Community Guides</h3>\n<ul>\n<li><p><a href=\"http://gary.wenneker.org/sitecore-jss-extending-the-layout-service/\">Extending the Layout Service</a> by <a href=\"https://twitter.com/GaryWenneker\">Gary Wenneker</a>.</p></li>\n<li><p>In case you need to change many renderings and add more complicated customizations of the Layout Service, a better approach is to apply a global Layout Service Configuration. <a href=\"http://gary.wenneker.org/sitecore-jss-using-a-custom-layout-service-configuration/\">Sitecore JSS: Using a custom Layout Service configuration</a> by <a href=\"https://twitter.com/GaryWenneker\">Gary Wenneker</a>.<br />\n&nbsp;</p></li>\n</ul>\n<h3 id=\"sample-implementations\">Sample implementations</h3>\n<p>Combining integrated GraphQL and Rendering Contents Resolver output</p>\n<ul>\n<li>Custom Descendants resolver: gets descendant items of the context item's data source. <a href=\"https://joost-sitecore.blogspot.com/2020/01/sitecore-jss-layout-service-extensions.html\">JSS and arbitrary item hierarchies</a> by <a href=\"https://twitter.com/vitalii_tylyk\">Vitalii Tylyk</a>. (This post also shows a sample of solving this scenario with Integrated GraphQL).</li>\n</ul>\n<p>&nbsp;</p>\n<ul>\n<li>Custom resolver that enables using both, an <code>Integrated GraphQL</code> query and a <code>Rendering Content Resolver</code> in the same component (by default you can only use one or the other). <a href=\"https://blog.vitaliitylyk.com/combining-integrated-graphql-and-rendering-contents-resolver-output/\">Combining integrated GraphQL and Rendering Contents Resolver output</a> by <a href=\"https://twitter.com/vitalii_tylyk\">Vitalii Tylyk</a>.</li>\n</ul>\n<hr />\n<h2 id=\"other-customization-methods\">Other Customization Methods</h2>\n<h3 id=\"alternative-method-to-extend-layout-service-data\">Alternative method to extend Layout Service data</h3>\n<p><a href=\"https://www.coreysmith.co/jss-extend-layout-service-rendering-data\">\"Sitecore JSS - Extend Layout Service Rendering Data\"</a> by <a href=\"https://twitter.com/sitecorey\">Corey Smith</a></p>\n<h3 id=\"extend-sitecore-context-from-the-jss-app\">Extend Sitecore Context from the JSS app</h3>\n<p>The <code>SitecoreContextFactory</code> stores the Sitecore context for the app. The script that initializes the <code>SitecoreContextFactory</code> singleton lives in your JSS app, not in the base JSS modules (See <a href=\"https://github.com/Sitecore/jss/blob/dev/samples/react/src/lib/SitecoreContextFactory.js\"><code>/src/lib/SitecoreContextFactory.js</code></a> . So a custom version of <code>SitecoreContextFactory</code> that extends the base class can be plugged in here.</p>\n<hr />\n<h2 id=\"customize-layout-service-response-via-dataapi-options\">Customize Layout Service response via dataApi options</h2>\n<p>Refer to <a href=\"/guides/code-patterns/routing#customizing-route-handling\">Customizing route handling: Using the <code>querystringParams</code> option</a></p>\n"},"toc":{"value":"<div class=\"toc\">\n<ul>\n<li><a href=\"#when-to-customize-layout-service-output\">When to customize Layout Service output</a><ul>\n<li><a href=\"#security-considerations\">Security considerations</a></li>\n</ul>\n</li>\n<li><a href=\"#extending-sitecore-context\">Extending Sitecore Context</a><ul>\n<li><a href=\"#extending-sitecore-context-in-disconnected-mode\">Extending Sitecore Context in Disconnected Mode</a></li>\n</ul>\n</li>\n<li><a href=\"#rendering-contents-resolvers\">Rendering Contents Resolvers</a><ul>\n<li><a href=\"#ootb-resolvers\">OOTB Resolvers</a></li>\n<li><a href=\"#building-custom-resolvers\">Building Custom Resolvers</a></li>\n<li><a href=\"#community-guides\">Community Guides</a></li>\n<li><a href=\"#sample-implementations\">Sample implementations</a></li>\n</ul>\n</li>\n<li><a href=\"#other-customization-methods\">Other Customization Methods</a><ul>\n<li><a href=\"#alternative-method-to-extend-layout-service-data\">Alternative method to extend Layout Service data</a></li>\n<li><a href=\"#extend-sitecore-context-from-the-jss-app\">Extend Sitecore Context from the JSS app</a></li>\n</ul>\n</li>\n<li><a href=\"#customize-layout-service-response-via-dataapi-options\">Customize Layout Service response via dataApi options</a></li>\n</ul>\n</div>\n\n"}}}]}}],"jssdocs-footer":[{"uid":"{E66FAF4C-9A92-54B3-8AC1-5DCE9D55F947}","componentName":"Row","dataSource":"available-in-connected-mode","params":{"justify":"center","compactGutter":"24","fullSizeGutter":"32"},"fields":{},"placeholders":{"jssdocs-row":[{"uid":"{E8745F35-0804-5727-A589-B8A8971B24FE}","componentName":"FooterNav","dataSource":"available-in-connected-mode","params":{},"fields":{}}]}},{"uid":"{CF900EDF-121F-5E65-80AF-B6399382CF80}","componentName":"Row","dataSource":"available-in-connected-mode","params":{"justify":"center","margin":"30px"},"fields":{},"placeholders":{"jssdocs-row":[{"uid":"{221F8AD5-8105-55DE-970A-CC3C5BEB8873}","componentName":"Disclaimers","dataSource":"available-in-connected-mode","params":{},"fields":{}}]}}]}}},"viewBag":{}};</script><script src="/assets/js/highlight.pack.js"></script><script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script src="/dist/client.bundle.js"></script></body></html>