---
name: vercel
routeTemplate: ./data/component-templates/article.yml
title: Deploying to Vercel
---
# Walkthrough: Deploying to Vercel

Vercel is an all-in-one platform with Global CDNs supporting deployment and delivery of static & [Jamstack](https://jamstack.org/) apps. Vercel has first-class support for Next.js.

This guide will demonstrate deploying the Next.js sample app that's generated by the `jss create` command to Vercel. Assuming you already have the sample app set up and connected to a Sitecore instance, complete the following steps to deploy the sample app to production:

1. Execute the steps provided in the Next.js  guide for [Getting Started](https://nextjs.org/docs/deployment#getting-started) with deployment.
2. Add [environment variables](https://nextjs.org/docs/basic-features/environment-variables#environment-variables-on-vercel) to Vercel or modify `.env` file. We recommend to use environment variables in Vercel:
	* `PUBLIC_URL` - your Vercel deployment URL.
	* `SITECORE_API_KEY` - your Sitecore API key. For Sitecore XM, the `SITECORE_API_KEY` will be your Sitecore SSC API key. For Sitecore Experience Edge, this will be the [API key provisioned here](https://doc.sitecore.com/developers/101/developer-tools/en/test-your-queries.html).
	* `SITECORE_API_HOST` - your Sitecore API hostname. The `SITECORE_API_HOST` is not required for Sitecore Experience Edge.
	* `JSS_EDITING_SECRET` - your secret token. The `JSS_EDITING_SECRET` is optional for deployments but necessary if you want to use the Experience Editor with your Next.js Vercel deployment. Read about [connecting your Next.js application to the Experience Editor](/docs/nextjs/experience-editor/walkthrough).
	* `GRAPH_QL_ENDPOINT` - your GraphQL endpoint. The `GRAPH_QL_ENDPOINT` is required for Sitecore Experience Edge. For Sitecore XM, this is typically optional. By default, the endpoint is calculated using the resolved Sitecore API hostname + the `graphQLEndpointPath` defined in your `package.json`.
3. Push the changes to your Git provider.

## Video demonstration

<p>
  Watch the following video to see the deployment process and get some tips.
  <iframe width="672" height="378" src="https://www.youtube.com/embed/s_F5hoNsvOo" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</p>

## Sitecore XM `publish:end` webhook invocation

Using the Sitecore XM `publish:end` webhook, you can automatically trigger static site generation, cache clearing, and other automated activities with webhook support.

To enable the `Publish:end` hook:

1. [Create a deploy hook](https://vercel.com/docs/more/deploy-hooks#creating-a-deploy-hook) in Vercel.
2. Create webhook config based on example `/App_Config/Sitecore/JavaScriptServices/Sitecore.JavaScriptServices.AppServices.PublishingWebHook.config.example`, and include it in your solution:
	* `url` - Required. The URL of the hook to be invoked.
	* `method` - Optional. The HTTP method for invoking webhook. Possible values are `POST` or `GET`. The default method is `POST`.
	* `site` - Optional. The sites which should trigger the webhook when published. By default, Sitecore will trigger the webhook for every published item. If you provide the site parameter, the webhook will be invoked if the published item root is an ancestor, descendant, or equal to the configured site's root item.
3. Deploy webhook config to your Sitecore instance.
4. Publish items.
5. On Vercel, check that the end of the publishing process triggered a new deployment.

## Webhooks on Edge

Instead of triggering a webhook when the publishing process finalizes in Sitecore, if you are using Sitecore Experience Edge, you can trigger webhooks when your data reaches the Edge Delivery Platform. 

You can register, update, remove or list webhooks with the help of the Experience Edge [Admin API](https://doc.sitecore.com/developers/101/developer-tools/en/admin-api.html).

> Before using the Admin API for any operations, make sure to [obtain an authentication token](https://doc.sitecore.com/developers/101/developer-tools/en/request-a-jwt-for-experience-edge-xm-using-oauth.html).

To trigger a new deployment on Vercel when your data reaches the Edge Delivery Platform: 

1. [Create a deploy hook](https://vercel.com/docs/more/deploy-hooks#creating-a-deploy-hook) in Vercel and copy the URL of the webhook.
2. Send a `POST` request to the Admin API webhook endpoint `https://edge.sitecorecloud.io/api/admin/v1/webhook` as follows: 
```json
{
    "label": "My new webhook",
    "createdBy": "SOME_USER_ID",
    "uri": "YOUR_VERCEL_WEBHOOK_URL",
    "method": "GET"
}
```
3. To verify the request completed successfully, check that you received a `201 Created` response status code. 
4. Make some changes in Sitecore and publish. 
5. When the Experience Edge finishes processing the new data, the publishing process is complete and Vercel should start a new deployment.
