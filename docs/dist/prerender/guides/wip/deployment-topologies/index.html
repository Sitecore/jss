<!DOCTYPE html>
<html lang="en" data-reactroot=""><head><link rel="stylesheet" href="/dist/server.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/><link rel="stylesheet" href="/dist/client.css"/><link rel="icon" type="image/png" href="/assets/img/favicon-32x32.png"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Sitecore JavaScript Services Documentation"/><title data-react-helmet="true">Migration Guide | Sitecore JSS Documentation</title></head><body><div id="app"><section class="ant-layout" id="app-wrap"><header class="ant-layout-header"><div class="ant-row ant-row-start" style="padding:30px"><a style="flex:300px" href="/"><img src="/assets/img/sitecore-logo.svg" height="53px" alt="Sitecore JSS" class="logo"/></a><ul flex="auto" style="border-bottom:none" class="ant-menu ant-menu-light ant-menu-root ant-menu-horizontal" role="menu"><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>¬∑¬∑¬∑</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" href="/features">Features</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>¬∑¬∑¬∑</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" href="/docs">Documentation</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>¬∑¬∑¬∑</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child ant-menu-item-selected" role="menuitem"><a class="nav-link" href="/guides">Guides</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>¬∑¬∑¬∑</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" target="_blank" rel="noopener noreferrer" href="https://www.sitecore.com/getting-started/developer-trial">Trial</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>¬∑¬∑¬∑</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem"><a class="nav-link" href="/community">Community</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>¬∑¬∑¬∑</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item get-started-button ant-menu-item-only-child" role="menuitem"><a class="btn btn-secondary btn-sm float-left text-white" href="/docs/getting-started/quick-start">Get Started</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute" role="menuitem"><div class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true"><span>¬∑¬∑¬∑</span><i class="ant-menu-submenu-arrow"></i></div></li></ul></div></header><div class="main-wrapper"><section class="ant-layout border-bottom"><section class="jumbo-container jumbo-container-short bg-light"><div class="default"><div class="circleContainer"><div class="circleContainer-outer-top"><div class="circleContainer-inner"><div class="circleContainer-inner-primary"><div class="circ circ_right circle-fg-right-lg bg-success" id="defaultimage"><img src="/assets/img/transparent-1x1.png"/></div></div><div class="circleContainer-inner-secondary"><div class="circ circ_right circle-fg-right-lg-sub bg-primary"></div></div></div></div><div class="circleContainer-outer-bottom"><div class="circleContainer-inner"><div class="circleContainer-inner-primary"><div class="circle circle-fg-left-md bg-success"></div></div></div></div></div><div class="shapes-wrapper"><div class="outer-shape container"><div class="inner-shape row"><div class="content-wrapper col-12 col-md-9 min-height"><div class="content-wrapper-inner"><h1 class="title mb-3">Guides, Patterns, &amp; Recommended Practices</h1><p class="copy mb-0 p-0">A collection of learnings and recommendations from our developers and community, based on learnings from real-world projects.</p></div></div></div></div></div></div></section></section><div class="ant-row ant-row-space-between" style="margin-left:-20px;margin-right:-20px;flex-wrap:nowrap;margin:30px"><div style="padding-left:20px;padding-right:20px;flex:0 0 300px" class="ant-col"><aside><div class="side-nav"><ul class="ant-menu ant-menu-light ant-menu-root ant-menu-inline" role="menu"><li class="ant-menu-submenu ant-menu-submenu-inline" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true" title="Thinking in JSS">Thinking in JSS<i class="ant-menu-submenu-arrow"></i></div><div></div></li><li class="ant-menu-submenu ant-menu-submenu-inline" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true" title="Code Patterns">Code Patterns<i class="ant-menu-submenu-arrow"></i></div><div></div></li><li class="ant-menu-submenu ant-menu-submenu-inline" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true" title="Multisite Scenarios">Multisite Scenarios<i class="ant-menu-submenu-arrow"></i></div><div></div></li><li class="ant-menu-item ant-menu-item-only-child" role="menuitem" style="padding-left:24px"><a href="/guides/performance">Performance</a></li><li class="ant-menu-submenu ant-menu-submenu-inline" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true" title="Debugging">Debugging<i class="ant-menu-submenu-arrow"></i></div><div></div></li><li class="ant-menu-submenu ant-menu-submenu-inline" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true" title="GraphQL">GraphQL<i class="ant-menu-submenu-arrow"></i></div><div></div></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-selected" role="menuitem"><div style="padding-left:24px" class="ant-menu-submenu-title" role="button" aria-expanded="false" aria-haspopup="true" title="üöß Work in Progress">üöß Work in Progress<i class="ant-menu-submenu-arrow"></i></div><div></div></li></ul><div class="navbar-nav bd-navbar-nav flex-column"></div></div></aside></div><div style="padding-left:20px;padding-right:20px;flex:auto" class="ant-col"><main><h1>Migration Guide</h1><section class="toc-container"><div class="title">In this guide</div><div match="[object Object]" location="[object Object]" history="[object Object]"><div class="toc">
<ul>
<li><a href="#master-sitecore-on-youtube---jss-deployment-topologies-and-performance-considerations">Master Sitecore on YouTube - JSS Deployment Topologies and Performance Considerations</a></li>
<li><a href="#integrated-mode">Integrated Mode</a></li>
<li><a href="#headless-mode-with-ssr">Headless Mode with SSR</a><ul>
<li><a href="#pros">Pros</a></li>
<li><a href="#scaling">Scaling</a></li>
</ul>
</li>
<li><a href="#api-only">API Only</a></li>
<li><a href="#csr">CSR</a></li>
<li><a href="#prerender-to-cdn">Prerender to CDN</a><ul>
<li><a href="#cdn-with-csr">CDN with CSR</a><ul>
<li><a href="#pros-1">Pros</a></li>
<li><a href="#cons">Cons</a></li>
<li><a href="#concerns">Concerns</a></li>
</ul>
</li>
<li><a href="#cdn-with-ssr">CDN with SSR</a><ul>
<li><a href="#pros-2">Pros</a></li>
<li><a href="#cons-1">Cons</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#community-guide">Community Guide</a></li>
</ul>
</div>

</div></section><div class="Guide markdown-section" match="[object Object]" location="[object Object]" history="[object Object]"><blockquote>
  <p>‚ö†Ô∏è This page is still a work in progress.</p>
  <p>‚ö†Ô∏è TODO: How to organize this content? Combine the OOTB topologies with docs and leave the non-standard topologies in guides?</p>
</blockquote>
<h2 id="master-sitecore-on-youtube---jss-deployment-topologies-and-performance-considerations">Master Sitecore on YouTube - JSS Deployment Topologies and Performance Considerations</h2>
<p>
  <iframe width="672" height="378" src="https://www.youtube.com/embed/YUBpmZMi7R4" frameborder="0" allow="accelerometer; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
  <small style="display:block">
    <a href="https://www.youtube.com/playlist?list=PL1jJVFm_lGnwZup4L4BjITS2sKr4rpMfI" target="_blank">
      View the entire Master Sitecore "Headless &amp; JSS" playlist on YouTube
    </a>
  </small>
</p>
<h2 id="integrated-mode">Integrated Mode</h2>
<p><a href="/docs/techniques/devops#integrated-topology">Integrated Mode</a> is used mainly for CM, as the Node service is hosted on the same server as the Sitecore instance, thus making them share the same resources like Memory and CPU. This makes the topology not suitable for high user loads.</p>
<blockquote>
  <p><code>Integrated Mode</code> is required for CM in order for <code>Experience Editor</code> to be able to render the application and be editable.</p>
</blockquote>
<hr />
<h2 id="headless-mode-with-ssr">Headless Mode with SSR</h2>
<p>In a&nbsp;<a href="/docs/fundamentals/application-modes#headless-server-side-rendering-mode">Headless Mode with SSR</a>, a traditional Sitecore XP (or XM) deployment is turned into an API server that serves content and layout data - with personalization pre-applied. So when running in headless mode, the Sitecore CD servers do not directly serve the public website. Instead, a cluster of inexpensive Node.js servers host the public-facing website.</p>
<h3 id="pros">Pros</h3>
<ul>
<li>Sample config provided OOTB</li>
<li>Pre-rendered HTML = good SEO</li>
<li>Sitecore behind proxy = good security</li>
<li>Scale Node and CDs separately</li>
</ul>
<p>In Headless Proxy with Server Side Rendering (SSR) topology, the JavaScript front-end is physically decoupled from the Sitecore back-end. Node servers act as a proxy between Sitecore Content Delivery servers and the end-user‚Äôs browser. They make requests to the JSS APIs running on the CD servers and then render the JSS application to HTML before returning it to the client.</p>
<p>Note on the diagram that when we talk about Headless Proxy topology, the proxy aspect only applies to CD servers. CMs still use integrated mode. A common misconception is that as the end-user browses the app, every route loads from server-side rendered html. But the way it works is that only the user‚Äôs first request to the app comes from the server, and subsequent route navigation is processed client-side.</p>
<p>Server-side rendering is good for SEO, and having Sitecore behind a proxy is good for security.<br />
This is generally a fine option for most clients on JSS, until we get to enterprise-level apps, where traffic is exceptionally high.</p>
<h3 id="scaling">Scaling</h3>
<p>In Headless Proxy with Server Side Rendering, The Sitecore CDs and Node servers can scale separately. Proper load testing is required to find the best ratio of CD to Nodes for your specific codebase. But if you have no idea where to start, 2 Node servers for every CD is a reasonable starting point.</p>
<p>Rendering JavaScript server-side takes CPU resources, and scaling it takes more of them. So you can‚Äôt scale Sitecore CD‚Äôs without adding more Node rendering instances. You‚Äôd want at least as many node processes as number of cores ‚Äì this is achieved via node clusters.</p>
<hr />
<h2 id="api-only">API Only</h2>
<p><a href="/docs/fundamentals/application-modes#api-only-mode">API Only Mode</a> allows Sitecore data to be consumed directly though its headless APIs, providing JSON to any platform or service, as long as it is an authenticated request. NodeJS is not required for rendering the application. Keep in mind that separate requests have to be made for each route and service.</p>
<p>The only OOTB caching technique would be Output Caching, enabled from the Content Editor.<br />
This can have impact on performance.</p>
<hr />
<h2 id="csr">CSR</h2>
<p>Client Side Rendering allows to offload the application rendering to the Client, instead of being performed by NodeJS.</p>
<p>When the user visits the site, the server sends the index.html together with the JavaScript files, the work of rendering the JS app is handled by the browser. This allows saving cost on infrastructure as the load on the servers is  greatly reduced.</p>
<p>One risk with this approach is that it can cause a poor user experience if client-side performance-saving measures are not utilized by the app (lazy loading, async loading, using web workers, using browser cache, etc).</p>
<p>The main concern for CSR applications is the SEO results. Google is fine at crawling single page apps, but not all search engines are. So the client‚Äôs locale affects whether this is a feasible option.</p>
<hr />
<h2 id="prerender-to-cdn">Prerender to CDN</h2>
<h3 id="cdn-with-csr">CDN with CSR</h3>
<p>In CDN with client-side rendering topology, a CDN is used to serve static assets to the end-user, and the work of rendering the JavaScript app is offloaded to the browser.</p>
<p>The CM operates in Integrated mode as in Headless SSR and it is responsible to push the static JSS app assets that get generated on the CM at build time to a CDN. These assets consist of JavaScript files and a HTML file with the DOM root of the JSS app. Set up the CDN as a caching reverse proxy over the root domain and ensure it caches pre-rendered HTML pages, but not calls to Layout Service.</p>
<p>When the end-user initially loads the page, the static assets that are needed to process the app in browser are fetched from the CDN.</p>
<p>If there is personalized content, subsequent calls need to be made back to Layout Service after initial page load to fetch this data. Note that this portion of work can be delayed until a later phase if your project isn‚Äôt utilizing personalization yet.</p>
<p>In this topology, there is little server-side processing happening upon the end-user‚Äôs initial route request. All the DOM virtualizing and JavaScript execution work is distributed to the user‚Äôs browser. So the performance improvements are dramatic.</p>
<p>An extra benefit is decreased infrastructure cost. As you can see in the diagram, the CD environment doesn‚Äôt use any Node servers since the app is being client-side rendered.</p>
<p>The downside of this topology is the cost and risk associated with developing and maintaining this customization. Additionally, Google is fine at crawling single page apps, but not all search engines are. So the client‚Äôs locale affects whether this is a feasible option.</p>
<h4 id="pros-1">Pros</h4>
<ul>
<li>Speed improvement<ul>
<li>Virtual DOM rendering load on browsers</li>
<li>Lighter load on CD(s)</li></ul></li>
<li>Cost improvement (Don‚Äôt need Node server in CD topology; SSR still required on CM for Experience Editor)</li>
</ul>
<h4 id="cons">Cons</h4>
<ul>
<li>Cost addition (Extra complexity/development)</li>
</ul>
<h4 id="concerns">Concerns</h4>
<ul>
<li>SEO</li>
</ul>
<h3 id="cdn-with-ssr">CDN with SSR</h3>
<p>Use CDN to serve pre-rendered app to end-user; call back to Layout Service for personalization data</p>
<p>CDN with server side pre-render topology is very similar to the CDN with CSR, except that the CDN is used to serve a pre-rendered app to the end-user instead of static assets.</p>
<p>When content authors make changes on the CM, the integrated Node service server-side renders the routes in the JSS app, and the resulting HTML gets pushed to a CDN. This could be hooked into a publish event. On initial page load, end-users load the server-side rendered app from the CDN. If there is personalized content, subsequent calls need to be made back to Layout Service after initial page load to fetch this data. And this portion of work can be delayed until a later phase if your project isn‚Äôt utilizing personalization yet.</p>
<p>Since the end-user is getting pre-loaded HTML on page-load, this approach poses no SEO concerns.</p>
<h4 id="pros-2">Pros</h4>
<ul>
<li>Speed improvement<ul>
<li>Fetch pre-rendered page via hyper fast CDN</li>
<li>Lighter load on CD(s)</li></ul></li>
<li>Cost reduction (Don‚Äôt need Node servers in CD topology)</li>
</ul>
<h4 id="cons-1">Cons</h4>
<ul>
<li>Cost addition (Extra development or hire agency)</li>
</ul>
<h2 id="community-guide">Community Guide</h2>
<p>Multi-part guide by <a href="https://twitter.com/erzr">Adam Lamarre</a></p>
<ul>
<li>Part 1. <a href="https://www.adamlamarre.com/static-site-generator-for-sitecore-jss/">Static Site Generator for Sitecore JSS</a></li>
<li>Part 2. <a href="https://www.adamlamarre.com/using-fetchplaceholderdata-for-personalization-on-static-sitecore-jss-sites/">Using fetchPlaceholderData for Personalization on Static Sitecore JSS Sites</a></li>
</ul>
</div><hr/><div>Found a problem? Have something to add?¬†<a href="https://github.com/Sitecore/jss/edit/guides/docs/data/routes/guides/wip/migration-guide/en.md">Edit this on GitHub</a></div></main></div></div></div><footer class="ant-layout-footer"><div class="ant-row ant-row-center" style="margin-left:-16px;margin-right:-16px"><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a class="nav-link text-uppercase small text-white font-weight-bold" href="/features">Features</a><nav class="nav flex-column"><a class="nav-link small text-white" href="/features/why-jss">Why JSS?</a><a class="nav-link small text-white" href="/features/why-sitecore">Why Sitecore?</a></nav></div><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a class="nav-link text-uppercase small text-white font-weight-bold" href="/docs">Documentation</a><nav class="nav flex-column"><a class="nav-link small text-white" href="/docs/getting-started/quick-start">Getting Started</a><a class="nav-link small text-white" href="/docs/fundamentals/architecture">Fundamentals</a><a class="nav-link small text-white" href="/docs/client-frameworks/react/react-overview">Client Frameworks</a><a class="nav-link small text-white" href="/docs/techniques/mvc-integration/javascript-rendering">Techniques</a><a class="nav-link small text-white" href="/release-notes">Release Notes</a><a class="nav-link small text-white" href="/help">FAQs</a></nav></div><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a href="https://www.sitecore.com/getting-started/developer-trial" target="_blank" rel="noopener noreferrer" class="nav-link text-uppercase small text-white font-weight-bold">Start Trial</a></div><div style="padding-left:16px;padding-right:16px" class="ant-col ant-col-xs-24 ant-col-md-5"><a class="nav-link text-uppercase small text-white font-weight-bold" href="/community">Community</a><nav class="nav flex-column"><a href="#" class="nav-link small text-white">Sitecore Community</a><a href="slack://channel?team=T09SHRBNU&amp;id=C7JT0NRQW" class="nav-link small text-white"><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" focusable="false"><title>Slack</title><path fill="currentColor" d="M210.787 234.832l68.31-22.883 22.1 65.977-68.309 22.882z"></path><path d="M490.54 185.6C437.7 9.59 361.6-31.34 185.6 21.46S-31.3 150.4 21.46 326.4 150.4 543.3 326.4 490.54 543.34 361.6 490.54 185.6zM401.7 299.8l-33.15 11.05 11.46 34.38c4.5 13.92-2.87 29.06-16.78 33.56-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18l-11.46-34.38-68.36 22.92 11.46 34.38c4.5 13.92-2.87 29.06-16.78 33.56-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18l-11.46-34.43-33.15 11.05c-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18c-4.5-13.92 2.87-29.06 16.78-33.56l33.12-11.03-22.1-65.9-33.15 11.05c-2.87.82-6.14 1.64-9 1.23a27.32 27.32 0 0 1-24.56-18c-4.48-13.93 2.89-29.07 16.81-33.58l33.15-11.05-11.46-34.38c-4.5-13.92 2.87-29.06 16.78-33.56s29.06 2.87 33.56 16.78l11.46 34.38 68.36-22.92-11.46-34.38c-4.5-13.92 2.87-29.06 16.78-33.56s29.06 2.87 33.56 16.78l11.47 34.42 33.15-11.05c13.92-4.5 29.06 2.87 33.56 16.78s-2.87 29.06-16.78 33.56L329.7 194.6l22.1 65.9 33.15-11.05c13.92-4.5 29.06 2.87 33.56 16.78s-2.88 29.07-16.81 33.57z" fill="currentColor"></path></svg>JSS Slack</a><a href="https://sitecore.stackexchange.com/tags/jss" class="nav-link small text-white"><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 120"><title>Sitecore StackExchange</title><path fill="currentColor" d="M22.4 57.5h74.8v15.4H22.4z"></path><path fill="currentColor" d="M22.4 37.6h74.8V53H22.4z"></path><path fill="currentColor" d="M85.5 17H34.4c-6.6 0-12 5.5-12 12.3v4h74.8v-4C97.2 22.5 92 17 85.5 17z"></path><path fill="currentColor" d="M22.4 77.3v4c0 6.8 5.4 12.3 12 12.3h32v16.3l15.8-16.3h3.5c6.6 0 12-5.5 12-12.3v-4H22.4z"></path></svg>Stack Exchange</a><a href="https://github.com/sitecore/jss" class="nav-link small text-white"><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 499.36" focusable="false"><title>GitHub</title><path d="M256 0C114.64 0 0 114.61 0 256c0 113.09 73.34 209 175.08 242.9 12.8 2.35 17.47-5.56 17.47-12.34 0-6.08-.22-22.18-.35-43.54-71.2 15.49-86.2-34.34-86.2-34.34-11.64-29.57-28.42-37.45-28.42-37.45-23.27-15.84 1.73-15.55 1.73-15.55 25.69 1.81 39.21 26.38 39.21 26.38 22.84 39.12 59.92 27.82 74.5 21.27 2.33-16.54 8.94-27.82 16.25-34.22-56.84-6.43-116.6-28.43-116.6-126.49 0-27.95 10-50.8 26.35-68.69-2.63-6.48-11.42-32.5 2.51-67.75 0 0 21.49-6.88 70.4 26.24a242.65 242.65 0 0 1 128.18 0c48.87-33.13 70.33-26.24 70.33-26.24 14 35.25 5.18 61.27 2.55 67.75 16.41 17.9 26.31 40.75 26.31 68.69 0 98.35-59.85 120-116.88 126.32 9.19 7.9 17.38 23.53 17.38 47.41 0 34.22-.31 61.83-.31 70.23 0 6.85 4.61 14.81 17.6 12.31C438.72 464.97 512 369.08 512 256.02 512 114.62 397.37 0 256 0z" fill="currentColor" fill-rule="evenodd"></path></svg>Github</a></nav></div></div><div class="ant-row ant-row-center" style="margin:30px"><div class="ant-col footer-copyright small">¬© Copyright <!-- -->2020<!-- -->, Sitecore. All Rights Reserved.</div><div class="ant-col footer-copyright small"><a href="https://www.sitecore.com/trust" class="pl-2 pr-2" target="_blank" rel="noopener noreferrer">Legal</a><a href="https://www.sitecore.com/trust/privacy-policy" class="pl-2" target="_blank" rel="noopener noreferrer">Privacy</a></div></div></footer></section></div><script>window.__data={"sitecore":{"context":{"pageEditing":false,"site":{"name":"JssDisconnectedLayoutService"},"pageState":"normal","language":"en"},"route":{"databaseName":"available-in-connected-mode","deviceId":"available-in-connected-mode","itemId":"available-in-connected-mode","itemLanguage":"en","itemVersion":1,"layoutId":"available-in-connected-mode","templateId":"available-in-connected-mode","templateName":"Docs Route","name":"deployment-topologies","fields":{"title":{"value":"Deployment Topologies"},"editLink":{"value":{"text":"Edit this on GitHub","href":"https://github.com/Sitecore/jss/edit/guides/docs/data/routes/guides/wip/deployment-topologies/en.md"}}},"placeholders":{"jssdocs-header":[{"uid":"{FF230EBA-BF63-51A8-A8E4-8048974C88C3}","componentName":"Row","dataSource":"available-in-connected-mode","params":{"justify":"start","padding":"30px"},"fields":{},"placeholders":{"jssdocs-row":[{"uid":"{ED0AA988-6C62-5A7B-B73E-0B63E3546EC4}","componentName":"Logo","dataSource":"available-in-connected-mode","params":{"flex":"300px"},"fields":{}},{"uid":"{06634DC0-CA66-5725-8D62-1DB2CE690C9B}","componentName":"MainNav","dataSource":"available-in-connected-mode","params":{"flex":"auto"},"fields":{"selectedMenuItem":{"value":"guides"}}}]}}],"jssdocs-main":[{"uid":"{1AB09B83-6DBB-5BC0-93EB-EA5D092191DB}","componentName":"ArticleContainer","dataSource":"available-in-connected-mode","params":{},"fields":{},"placeholders":{"jssdocs-jumbo":[{"uid":"{3B9612B0-C714-550E-9DF0-2254AB08AD72}","componentName":"FeatureJumboShort","dataSource":"available-in-connected-mode","params":{},"fields":{"image":{"value":{"src":"/assets/img/transparent-1x1.png"}},"imageclass":{"value":"defaultimage"},"csscolorclass":{"value":"default"},"title":{"value":"Guides, Patterns, & Recommended Practices"},"text":{"value":"A collection of learnings and recommendations from our developers and community, based on learnings from real-world projects."}}}],"jssdocs-aside":[{"uid":"{9F99D2DE-B4FC-548F-B2D1-D2F1B8315282}","componentName":"SideNav","dataSource":"available-in-connected-mode","params":{},"fields":{"navType":{"value":"guides"},"useSearch":{"value":"false"}}}],"jssdocs-content":[{"uid":"{78B8E858-E790-5921-9B54-CCAE54F08E48}","componentName":"Guide","dataSource":"available-in-connected-mode","params":{},"fields":{"text":{"value":"<blockquote>\n  <p>‚ö†Ô∏è This page is still a work in progress.</p>\n  <p>‚ö†Ô∏è TODO: How to organize this content? Combine the OOTB topologies with docs and leave the non-standard topologies in guides?</p>\n</blockquote>\n<h2 id=\"master-sitecore-on-youtube---jss-deployment-topologies-and-performance-considerations\">Master Sitecore on YouTube - JSS Deployment Topologies and Performance Considerations</h2>\n<p>\n  <iframe width=\"672\" height=\"378\" src=\"https://www.youtube.com/embed/YUBpmZMi7R4\" frameborder=\"0\" allow=\"accelerometer; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n  <small style=\"display:block\">\n    <a href=\"https://www.youtube.com/playlist?list=PL1jJVFm_lGnwZup4L4BjITS2sKr4rpMfI\" target=\"_blank\">\n      View the entire Master Sitecore \"Headless &amp; JSS\" playlist on YouTube\n    </a>\n  </small>\n</p>\n<h2 id=\"integrated-mode\">Integrated Mode</h2>\n<p><a href=\"/docs/techniques/devops#integrated-topology\">Integrated Mode</a> is used mainly for CM, as the Node service is hosted on the same server as the Sitecore instance, thus making them share the same resources like Memory and CPU. This makes the topology not suitable for high user loads.</p>\n<blockquote>\n  <p><code>Integrated Mode</code> is required for CM in order for <code>Experience Editor</code> to be able to render the application and be editable.</p>\n</blockquote>\n<hr />\n<h2 id=\"headless-mode-with-ssr\">Headless Mode with SSR</h2>\n<p>In a&nbsp;<a href=\"/docs/fundamentals/application-modes#headless-server-side-rendering-mode\">Headless Mode with SSR</a>, a traditional Sitecore XP (or XM) deployment is turned into an API server that serves content and layout data - with personalization pre-applied. So when running in headless mode, the Sitecore CD servers do not directly serve the public website. Instead, a cluster of inexpensive Node.js servers host the public-facing website.</p>\n<h3 id=\"pros\">Pros</h3>\n<ul>\n<li>Sample config provided OOTB</li>\n<li>Pre-rendered HTML = good SEO</li>\n<li>Sitecore behind proxy = good security</li>\n<li>Scale Node and CDs separately</li>\n</ul>\n<p>In Headless Proxy with Server Side Rendering (SSR) topology, the JavaScript front-end is physically decoupled from the Sitecore back-end. Node servers act as a proxy between Sitecore Content Delivery servers and the end-user‚Äôs browser. They make requests to the JSS APIs running on the CD servers and then render the JSS application to HTML before returning it to the client.</p>\n<p>Note on the diagram that when we talk about Headless Proxy topology, the proxy aspect only applies to CD servers. CMs still use integrated mode. A common misconception is that as the end-user browses the app, every route loads from server-side rendered html. But the way it works is that only the user‚Äôs first request to the app comes from the server, and subsequent route navigation is processed client-side.</p>\n<p>Server-side rendering is good for SEO, and having Sitecore behind a proxy is good for security.<br />\nThis is generally a fine option for most clients on JSS, until we get to enterprise-level apps, where traffic is exceptionally high.</p>\n<h3 id=\"scaling\">Scaling</h3>\n<p>In Headless Proxy with Server Side Rendering, The Sitecore CDs and Node servers can scale separately. Proper load testing is required to find the best ratio of CD to Nodes for your specific codebase. But if you have no idea where to start, 2 Node servers for every CD is a reasonable starting point.</p>\n<p>Rendering JavaScript server-side takes CPU resources, and scaling it takes more of them. So you can‚Äôt scale Sitecore CD‚Äôs without adding more Node rendering instances. You‚Äôd want at least as many node processes as number of cores ‚Äì this is achieved via node clusters.</p>\n<hr />\n<h2 id=\"api-only\">API Only</h2>\n<p><a href=\"/docs/fundamentals/application-modes#api-only-mode\">API Only Mode</a> allows Sitecore data to be consumed directly though its headless APIs, providing JSON to any platform or service, as long as it is an authenticated request. NodeJS is not required for rendering the application. Keep in mind that separate requests have to be made for each route and service.</p>\n<p>The only OOTB caching technique would be Output Caching, enabled from the Content Editor.<br />\nThis can have impact on performance.</p>\n<hr />\n<h2 id=\"csr\">CSR</h2>\n<p>Client Side Rendering allows to offload the application rendering to the Client, instead of being performed by NodeJS.</p>\n<p>When the user visits the site, the server sends the index.html together with the JavaScript files, the work of rendering the JS app is handled by the browser. This allows saving cost on infrastructure as the load on the servers is  greatly reduced.</p>\n<p>One risk with this approach is that it can cause a poor user experience if client-side performance-saving measures are not utilized by the app (lazy loading, async loading, using web workers, using browser cache, etc).</p>\n<p>The main concern for CSR applications is the SEO results. Google is fine at crawling single page apps, but not all search engines are. So the client‚Äôs locale affects whether this is a feasible option.</p>\n<hr />\n<h2 id=\"prerender-to-cdn\">Prerender to CDN</h2>\n<h3 id=\"cdn-with-csr\">CDN with CSR</h3>\n<p>In CDN with client-side rendering topology, a CDN is used to serve static assets to the end-user, and the work of rendering the JavaScript app is offloaded to the browser.</p>\n<p>The CM operates in Integrated mode as in Headless SSR and it is responsible to push the static JSS app assets that get generated on the CM at build time to a CDN. These assets consist of JavaScript files and a HTML file with the DOM root of the JSS app. Set up the CDN as a caching reverse proxy over the root domain and ensure it caches pre-rendered HTML pages, but not calls to Layout Service.</p>\n<p>When the end-user initially loads the page, the static assets that are needed to process the app in browser are fetched from the CDN.</p>\n<p>If there is personalized content, subsequent calls need to be made back to Layout Service after initial page load to fetch this data. Note that this portion of work can be delayed until a later phase if your project isn‚Äôt utilizing personalization yet.</p>\n<p>In this topology, there is little server-side processing happening upon the end-user‚Äôs initial route request. All the DOM virtualizing and JavaScript execution work is distributed to the user‚Äôs browser. So the performance improvements are dramatic.</p>\n<p>An extra benefit is decreased infrastructure cost. As you can see in the diagram, the CD environment doesn‚Äôt use any Node servers since the app is being client-side rendered.</p>\n<p>The downside of this topology is the cost and risk associated with developing and maintaining this customization. Additionally, Google is fine at crawling single page apps, but not all search engines are. So the client‚Äôs locale affects whether this is a feasible option.</p>\n<h4 id=\"pros-1\">Pros</h4>\n<ul>\n<li>Speed improvement<ul>\n<li>Virtual DOM rendering load on browsers</li>\n<li>Lighter load on CD(s)</li></ul></li>\n<li>Cost improvement (Don‚Äôt need Node server in CD topology; SSR still required on CM for Experience Editor)</li>\n</ul>\n<h4 id=\"cons\">Cons</h4>\n<ul>\n<li>Cost addition (Extra complexity/development)</li>\n</ul>\n<h4 id=\"concerns\">Concerns</h4>\n<ul>\n<li>SEO</li>\n</ul>\n<h3 id=\"cdn-with-ssr\">CDN with SSR</h3>\n<p>Use CDN to serve pre-rendered app to end-user; call back to Layout Service for personalization data</p>\n<p>CDN with server side pre-render topology is very similar to the CDN with CSR, except that the CDN is used to serve a pre-rendered app to the end-user instead of static assets.</p>\n<p>When content authors make changes on the CM, the integrated Node service server-side renders the routes in the JSS app, and the resulting HTML gets pushed to a CDN. This could be hooked into a publish event. On initial page load, end-users load the server-side rendered app from the CDN. If there is personalized content, subsequent calls need to be made back to Layout Service after initial page load to fetch this data. And this portion of work can be delayed until a later phase if your project isn‚Äôt utilizing personalization yet.</p>\n<p>Since the end-user is getting pre-loaded HTML on page-load, this approach poses no SEO concerns.</p>\n<h4 id=\"pros-2\">Pros</h4>\n<ul>\n<li>Speed improvement<ul>\n<li>Fetch pre-rendered page via hyper fast CDN</li>\n<li>Lighter load on CD(s)</li></ul></li>\n<li>Cost reduction (Don‚Äôt need Node servers in CD topology)</li>\n</ul>\n<h4 id=\"cons-1\">Cons</h4>\n<ul>\n<li>Cost addition (Extra development or hire agency)</li>\n</ul>\n<h2 id=\"community-guide\">Community Guide</h2>\n<p>Multi-part guide by <a href=\"https://twitter.com/erzr\">Adam Lamarre</a></p>\n<ul>\n<li>Part 1. <a href=\"https://www.adamlamarre.com/static-site-generator-for-sitecore-jss/\">Static Site Generator for Sitecore JSS</a></li>\n<li>Part 2. <a href=\"https://www.adamlamarre.com/using-fetchplaceholderdata-for-personalization-on-static-sitecore-jss-sites/\">Using fetchPlaceholderData for Personalization on Static Sitecore JSS Sites</a></li>\n</ul>\n"},"toc":{"value":"<div class=\"toc\">\n<ul>\n<li><a href=\"#master-sitecore-on-youtube---jss-deployment-topologies-and-performance-considerations\">Master Sitecore on YouTube - JSS Deployment Topologies and Performance Considerations</a></li>\n<li><a href=\"#integrated-mode\">Integrated Mode</a></li>\n<li><a href=\"#headless-mode-with-ssr\">Headless Mode with SSR</a><ul>\n<li><a href=\"#pros\">Pros</a></li>\n<li><a href=\"#scaling\">Scaling</a></li>\n</ul>\n</li>\n<li><a href=\"#api-only\">API Only</a></li>\n<li><a href=\"#csr\">CSR</a></li>\n<li><a href=\"#prerender-to-cdn\">Prerender to CDN</a><ul>\n<li><a href=\"#cdn-with-csr\">CDN with CSR</a><ul>\n<li><a href=\"#pros-1\">Pros</a></li>\n<li><a href=\"#cons\">Cons</a></li>\n<li><a href=\"#concerns\">Concerns</a></li>\n</ul>\n</li>\n<li><a href=\"#cdn-with-ssr\">CDN with SSR</a><ul>\n<li><a href=\"#pros-2\">Pros</a></li>\n<li><a href=\"#cons-1\">Cons</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#community-guide\">Community Guide</a></li>\n</ul>\n</div>\n\n"}}}]}}],"jssdocs-footer":[{"uid":"{50E371FB-BFC9-55F9-9849-AA33CD3B1550}","componentName":"Row","dataSource":"available-in-connected-mode","params":{"justify":"center","compactGutter":"24","fullSizeGutter":"32"},"fields":{},"placeholders":{"jssdocs-row":[{"uid":"{A0CB843C-6111-5B93-BFBB-AF7683F13357}","componentName":"FooterNav","dataSource":"available-in-connected-mode","params":{},"fields":{}}]}},{"uid":"{419D2485-8E57-5D7B-A389-17A342D73AB3}","componentName":"Row","dataSource":"available-in-connected-mode","params":{"justify":"center","margin":"30px"},"fields":{},"placeholders":{"jssdocs-row":[{"uid":"{8F6B2C76-0B5C-54E2-9897-D23B2D01A181}","componentName":"Disclaimers","dataSource":"available-in-connected-mode","params":{},"fields":{}}]}}]}}},"viewBag":{}};</script><script src="/dist/vendor-client.bundle.js"></script><script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script src="/dist/client.bundle.js"></script></body></html>